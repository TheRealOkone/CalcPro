<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<style>
.button {
  background-color: #4CAF50; /* Green */
  border: none;
  color: white;
  padding: 15px 15px;
  margin: 1px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  cursor: pointer;
  transition-duration: 0.4s;
  width: 30px;
  height: 20px;
}
.button:hover {
  background-color: white; 
  color: white;
}
</style>
<body>
<div class="button" onclick="changeText('(')">(</div>
<div class="button" onclick="changeText(')')">)</div>
<div class="button" onclick="changeText('CLR')">CLR</div>
<div class="button" onclick="changeText(',')">,</div>
<br>
<div class="button" onclick="changeText('-')">-</div>
<div class="button" onclick="changeText('+')">+</div>
<div class="button" onclick="changeText('DEL')">DEL</div>
<div class="button" onclick="changeText('.')">.</div>
<br>
<div class="button" onclick="changeText('*')">*</div>
<div class="button" onclick="changeText('/')">/</div>
<div class="button" onclick="changeText('sqrt(')">&#8730;x</div>
<br>
<div class="button" onclick="changeText('abs(')">|x|</div>
<div class="button" onclick="changeText('pow(')">x^y</div>
<div class="button" onclick="getRequest()">=</div>
<br>
<div class="button" onclick="changeText(7)">7</div>
<div class="button" onclick="changeText(8)">8</div>
<div class="button" onclick="changeText(9)">9</div>
<br>
<div class="button" onclick="changeText(4)">4</div>
<div class="button" onclick="changeText(5)">5</div>
<div class="button" onclick="changeText(6)">6</div>
<br>
<div class="button" onclick="changeText(1)">1</div>
<div class="button" onclick="changeText(2)">2</div>
<div class="button" onclick="changeText(3)">3</div>
<br>
<div class="button" onclick="changeText(0)">0</div>
Total <input type="text" id="count" value="Введите ваш пример"/>
<script>
function changeText(value) {
	if (document.getElementById('count').value == "Введите ваш пример")  document.getElementById('count').value = value;
	else
		if ((value == "DEL")&&(value != "")) document.getElementById('count').value = document.getElementById('count').value.slice(0, -1);
		else
			if (value == "CLR")  document.getElementById('count').value = "Введите ваш пример";
				else if (value != "DEL")
					{   
						if ((value == '-')||(value == '+')||(value == '*')||(value == '/')) document.getElementById('count').value += ' ';  
						document.getElementById('count').value += value;  
						if ((value == '-')||(value == '+')||(value == '*')||(value == '/')) document.getElementById('count').value += ' ';
					}
}
//function changePow(value)

//{
//	var retVal1 = prompt("Введите переменную x : ");
//	var retVal2 = prompt("Введите переменную y : ");
//	if (document.getElementById('count').value == "Введите ваш пример")  document.getElementById('count').value = 'pow('+retVal1+','+retVal2+') ';
//	else
//	document.getElementById('count').value += 'pow( '+retVal1+','+retVal2+') ';
//}

</script>
<script>
function getRequest() {
	let url = new URL('http://localhost:8080/home');
	url.searchParams.set('req', document.getElementById('count').value);
	let xhr = new XMLHttpRequest();
	xhr.open("POST", url, [true]);
	xhr.send();
	xhr.onload = function() {
 	if (xhr.status != 200) {
  		alert(`Ошибка ${xhr.status}: ${xhr.statusText}`);
  	} else {
		document.getElementById('count').value = xhr.responseText+' ';
  	}
	};
	
}
</script>
</body>
</html>
